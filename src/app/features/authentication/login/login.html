<!-- Outer Container: Matches Navbar Gradient Background -->
<div
    class="flex items-center justify-center min-h-[calc(100vh-80px)] bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 px-4 py-12">

    <!-- Card: Dark, Glassy look with border -->
    <mat-card
        class="w-full max-w-md !bg-gray-800/80 !backdrop-blur-md !text-white !rounded-2xl !border !border-gray-700 !shadow-2xl overflow-hidden relative">

        <!-- Decorative Glow (Optional Top Highlight) -->
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-indigo-500 to-blue-500"></div>

        <mat-card-header class="mb-6 mt-4 flex flex-col items-center justify-center text-center">
            <!-- Logo Icon (Optional match) -->
            <div
                class="w-12 h-12 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center mb-3 shadow-inner">
                <mat-icon class="text-blue-400 !w-7 !h-7 !text-[28px]">lock</mat-icon>
            </div>

            <mat-card-title
                class="!text-3xl !font-bold tracking-tight bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">
                Welcome Back
            </mat-card-title>
            <p class="text-gray-400 text-sm mt-2">Sign in to access your account</p>
        </mat-card-header>

        <mat-card-content>
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-5">

                <!-- Email Input -->
                <mat-form-field appearance="outline" class="w-full custom-dark-field">
                    <mat-label class="!text-gray-400">Email Address</mat-label>
                    <input matInput type="email" formControlName="email" placeholder="user@example.com"
                        class="!text-white">
                    <mat-icon matSuffix class="!text-gray-500">email</mat-icon>
                    @if (loginForm.get('email')?.hasError('required')) {
                    <mat-error>Email is required</mat-error>
                    }
                    @if (loginForm.get('email')?.hasError('email')) {
                    <mat-error>Please enter a valid email</mat-error>
                    }
                </mat-form-field>

                <!-- Password Input -->
                <mat-form-field appearance="outline" class="w-full custom-dark-field">
                    <mat-label class="!text-gray-400">Password</mat-label>
                    <input matInput [type]="hidePassword() ? 'password' : 'text'" formControlName="password"
                        class="!text-white">
                    <button mat-icon-button matSuffix type="button" (click)="togglePassword($event)"
                        class="!text-gray-500 hover:!text-blue-400 transition-colors">
                        <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                    @if (loginForm.get('password')?.hasError('required')) {
                    <mat-error>Password is required</mat-error>
                    }
                </mat-form-field>

                <!-- Sign In Button (Your Navbar Gradient Style) -->
                <button mat-flat-button type="submit" [disabled]="loginForm.invalid || isLoading()"
                    class="w-full !h-12 !text-lg !rounded-xl !bg-gradient-to-r !from-blue-600 !to-indigo-600 hover:!from-blue-500 hover:!to-indigo-500 !text-white !shadow-lg hover:!shadow-blue-500/25 hover:scale-[1.02] active:scale-95 transition-all duration-300 !flex !items-center !justify-center group disabled:!bg-none disabled:!bg-gray-700 
               disabled:!text-gray-500 disabled:!shadow-none 
               disabled:!cursor-not-allowed disabled:!scale-100">

                    @if (isLoading()) {
                    <div class="flex items-center gap-2">
                        <mat-spinner diameter="24" class="custom-spinner"></mat-spinner>
                        <span>Signing in...</span>
                    </div>
                    } @else {
                    <span class="flex items-center gap-2 font-semibold tracking-wide">
                        Sign In <mat-icon
                            class="!w-5 !h-5 !text-lg group-hover:translate-x-1 transition-transform">arrow_forward</mat-icon>
                    </span>
                    }
                </button>

                <!-- Divider -->
                <div class="relative my-2">
                    <div class="absolute inset-0 flex items-center">
                        <span class="w-full border-t border-gray-700"></span>
                    </div>
                    <div class="relative flex justify-center text-sm">
                        <span class="px-3 bg-gray-800 text-gray-500">Or continue with</span>
                    </div>
                </div>

                <!-- Google Button (Dark Theme Version) -->
                <button type="button" (click)="loginWithGoogle()"
                    class="w-full flex items-center justify-center gap-3 !bg-gray-700/50 !border !border-gray-600 !text-gray-200 hover:!bg-gray-700 hover:!border-gray-500 !font-medium py-2.5 px-4 !rounded-xl shadow-md transition-all duration-300 hover:-translate-y-0.5">
                    <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5" alt="Google">
                    <span>Sign in with Google</span>
                </button>

                <!-- Face ID Button (Dark Theme Version) -->
                <button type="button" (click)="loginWithFace()"
                    class="w-full flex items-center justify-center gap-3 !bg-indigo-500/10 !border !border-indigo-500/30 !text-indigo-300 hover:!bg-indigo-500/20 hover:!border-indigo-500/50 !font-medium py-2.5 px-4 !rounded-xl shadow-md transition-all duration-300 hover:-translate-y-0.5 group">
                    <mat-icon class="!text-indigo-400 group-hover:scale-110 transition-transform">face</mat-icon>
                    <span>Login with Face ID</span>
                </button>

                <!-- Register Link -->
                <div class="text-center mt-2">
                    <p class="text-gray-400 text-sm">
                        Don't have an account?
                        <a routerLink="/account/register"
                            class="text-blue-400 hover:text-blue-300 hover:underline font-medium transition-colors cursor-pointer">
                            Create one
                        </a>
                    </p>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>