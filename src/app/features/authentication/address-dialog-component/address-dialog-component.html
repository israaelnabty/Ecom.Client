<h2 mat-dialog-title>{{ isEditMode ? 'Edit Address' : 'Add New Address' }}</h2>
<mat-dialog-content>
    <form [formGroup]="addressForm" class="flex flex-col gap-3 pt-2">

        <!-- MAP SECTION -->
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">Pin Location</label>
            <app-map-picker-component (locationPicked)="onLocationPicked($event)"></app-map-picker-component>
        </div>

        <!-- FORM FIELDS (Auto-filled) -->
        <mat-form-field appearance="outline" class="w-full">
            <mat-label>Street Address</mat-label>
            <input matInput formControlName="street" placeholder="123 Main St">
            <mat-error>Required</mat-error>
        </mat-form-field>

        <div class="flex gap-3">
            <mat-form-field appearance="outline" class="w-1/2">
                <mat-label>City</mat-label>
                <input matInput formControlName="city">
                <mat-error>Required</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-1/2">
                <mat-label>Postal Code</mat-label>
                <input matInput formControlName="postalCode">
            </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="w-full">
            <mat-label>Country</mat-label>
            <input matInput formControlName="country">
            <mat-error>Required</mat-error>
        </mat-form-field>

    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancel</button>
    <button mat-flat-button color="primary" [disabled]="addressForm.invalid || isLoading" (click)="save()">
        {{ isLoading ? 'Saving...' : (isEditMode ? 'Update' : 'Save') }}
    </button>
</mat-dialog-actions>